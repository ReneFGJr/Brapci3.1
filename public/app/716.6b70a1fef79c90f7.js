"use strict";(self.webpackChunkBRP=self.webpackChunkBRP||[]).push([[716],{6716:(N,_,p)=>{p.r(_),p.d(_,{PopupModule:()=>w});var a=p(6814),d=p(5286),t=p(5879);let m=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["popup-index"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},dependencies:[d.lC],encapsulation:2}),i})();var l=p(95),f=p(1090),h=p(4392),v=p(9862);function g(i,s){1&i&&(t.TgZ(0,"p"),t._uU(1,"\u23f3 Carregando..."),t.qZA())}function x(i,s){1&i&&(t.TgZ(0,"p"),t._uU(1,"\u2705 Conclu\xeddo com sucesso!"),t.qZA())}function b(i,s){1&i&&(t.TgZ(0,"p"),t._uU(1,"\u274c Erro ao enviar arquivo!"),t.qZA())}function C(i,s){1&i&&(t.TgZ(0,"p"),t._uU(1,"\u{1f636} Clique para enviar o arquivo"),t.qZA())}function Z(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"section",15),t._uU(2," File details: "),t.TgZ(3,"ul")(4,"li"),t._uU(5),t.qZA(),t.TgZ(6,"li"),t._uU(7),t.qZA(),t.TgZ(8,"li"),t._uU(9),t.qZA(),t.TgZ(10,"li"),t._uU(11),t.qZA()()(),t.TgZ(12,"button",16),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.onUpload())}),t._uU(13," Enviar o arquivo "),t.qZA(),t.TgZ(14,"section",17),t.YNc(15,g,2,0,"p",18),t.YNc(16,x,2,0,"p",18),t.YNc(17,b,2,0,"p",18),t.YNc(18,C,2,0,"p",19),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(5),t.hij("Name: ",e.file.name,""),t.xp6(2),t.hij("Type: ",e.file.type,""),t.xp6(2),t.hij("Size: ",e.file.size," bytes"),t.xp6(2),t.hij("ID: ",e.ID,""),t.xp6(3),t.Q6J("ngSwitch",e.status),t.xp6(1),t.Q6J("ngSwitchCase","uploading"),t.xp6(1),t.Q6J("ngSwitchCase","success"),t.xp6(1),t.Q6J("ngSwitchCase","fail")}}function T(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"h2"),t._uU(2,"Single File Upload"),t.qZA(),t.TgZ(3,"input",13,14),t.NdJ("change",function(n){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onChange(n))}),t.qZA(),t.YNc(5,Z,19,8,"div",5),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(5),t.Q6J("ngIf",e.file)}}function F(i,s){if(1&i&&(t.TgZ(0,"button",29),t._UZ(1,"img",30),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("src",e.loaging_img,t.LSH)}}function y(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"option",31),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.selectResource(r.ID))}),t._uU(1),t.qZA()}if(2&i){const e=s.$implicit;t.Q6J("value",e.ID),t.xp6(1),t.hij(" ",e.name," ")}}function A(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"form",20)(2,"label"),t._uU(3,"Termos de busca"),t.qZA(),t.TgZ(4,"div",21)(5,"input",22),t.NdJ("keyup",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.keyUp())}),t.qZA(),t.TgZ(6,"button",23),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.submitAction())}),t._uU(7," Busca "),t.qZA(),t.YNc(8,F,2,1,"button",24),t._UZ(9,"br"),t.qZA(),t.TgZ(10,"select",25),t.YNc(11,y,2,2,"option",26),t.qZA(),t.TgZ(12,"button",27),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.createConcept())}),t._uU(13," Include "),t.qZA(),t.TgZ(14,"button",27),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.save(!0))}),t._uU(15," Save & Close "),t.qZA(),t.TgZ(16,"button",27),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.save(!1))}),t._uU(17," Save & Continue "),t.qZA(),t.TgZ(18,"button",28),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.wclose())}),t._uU(19," Close "),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.searchForm),t.xp6(7),t.Q6J("ngIf",e.loading),t.xp6(3),t.Q6J("ngForOf",e.concepts),t.xp6(1),t.Q6J("ngClass",0==e.btn1?"btn-primary":"btn-outline-secondary")("disabled",e.btn1),t.xp6(2),t.Q6J("ngClass",0==e.btn2?"btn-primary":"btn-outline-secondary")("disabled",e.btn2),t.xp6(2),t.Q6J("ngClass",0==e.btn3?"btn-primary":"btn-outline-secondary")("disabled",e.btn3)}}function I(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"form",20)(2,"label",32),t._uU(3,"Texto"),t.qZA(),t._UZ(4,"textarea",33),t.TgZ(5,"button",34),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.onSaveText())}),t._uU(6," Salvar "),t.qZA(),t.TgZ(7,"button",35),t._uU(8,"Fechar"),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.searchForm)}}function q(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",36)(1,"span",37),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.selectResource(r.Class))}),t._uU(2),t.qZA()()}if(2&i){const e=s.$implicit;t.xp6(2),t.Oqu(e.Class)}}function U(i,s){1&i&&(t.TgZ(0,"div")(1,"i"),t._uU(2,"none"),t.qZA()())}function R(i,s){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.selectedID," ")}}function D(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4),t.YNc(3,T,6,1,"div",5),t.YNc(4,A,20,9,"div",5),t.YNc(5,I,9,1,"div",5),t.qZA(),t.TgZ(6,"div",6)(7,"div",7),t._uU(8," Persistent ID "),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",7),t._uU(12,"Class"),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",7),t._uU(16," Propriety "),t.qZA(),t.TgZ(17,"div",8),t._uU(18),t.qZA(),t.TgZ(19,"div",7),t._uU(20," Resource "),t.qZA(),t.YNc(21,q,3,1,"div",9),t.TgZ(22,"div",10),t._uU(23," Selected "),t.qZA(),t.YNc(24,U,3,0,"div",5),t.YNc(25,R,2,1,"div",5),t.qZA(),t.TgZ(26,"div",11)(27,"button",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.closeAction())}),t._uU(28," Fechar Janela "),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngIf","Image"==e.xClass||"FileStorage"==e.xClass),t.xp6(1),t.Q6J("ngIf",0==e.literal&&"Image"!=e.xClass&&"FileStorage"!=e.xClass),t.xp6(1),t.Q6J("ngIf",1==e.literal),t.xp6(5),t.Oqu(e.ID),t.xp6(4),t.Oqu(e.class),t.xp6(4),t.Oqu(e.propriety),t.xp6(3),t.Q6J("ngForOf",e.tclass),t.xp6(3),t.Q6J("ngIf",!e.selectedID),t.xp6(1),t.Q6J("ngIf",e.selectedID)}}const k=[{path:"",component:m,children:[{path:"rdf/add/:id/:prop",component:(()=>{class i{constructor(e,o,n,r,c,u){this.fb=e,this.brapciService=o,this.localStorageService=n,this.router=r,this.route=c,this.http=u,this.loading=!1,this.loaging_img="/assets/img/loading.svg",this.fields=[],this.literal=!1,this.type="null",this.result=[],this.concepts=[],this.selectedID="",this.tclass=[],this.propriety="hasAuthor",this.class="Article",this.xClass="",this.ID="0",this.text="",this.btn1=!0,this.btn2=!0,this.btn3=!0,this.status="initial",this.file=null,this.term="",this.select=[{x:"a"},{y:"b"},{z:"z"}]}onChange(e){const o=e.target.files[0];o&&(this.status="initial",this.file=o)}closeAction(){window.close()}onUpload(){if(this.file){const e=new FormData;this.type="cover","hasFileStorage"==this.propriety&&(this.type="pdf"),"hasLogotype"==this.propriety&&(this.type="image"),console.log(this.propriety),console.log("+++"+this.type);let o=this.brapciService.url+"upload/"+this.type+"/"+this.ID;console.log(o),e.append("file",this.file,this.file.name),e.append("property",this.propriety);const n=this.http.post(o,e);this.status="uploading",n.subscribe({next:r=>{console.log(r),this.status="success"},error:r=>(this.status="fail",r)})}}createConcept(){let o="rdf/createConcept/"+this.xClass,n={name:this.searchForm.value.term};console.log(o),this.brapciService.api_post(o,n).subscribe(r=>{console.log(r),this.submitAction()})}ngOnInit(){this.sub=this.route.params.subscribe(e=>{this.ID=e.id,this.propriety=e.prop,this.fields=[{name:"Term",value:"",checked:!0},{name:"ID",value:this.ID,checked:!0},{name:"prop",value:this.propriety,checked:!0},this.recoverResources(this.ID,this.propriety)],this.createForm()})}selectResource(e){this.selectedID=e,this.btnChecks()}btnChecks(){this.btn1=!0,this.btn2=!0,this.btn3=!0,""!=this.selectedID&&(this.btn2=!1,this.btn3=!1),""==this.selectedID&&0==this.concepts.length&&(this.btn1=!1)}recoverResources(e,o){this.brapciService.api_post("rdf/getResource",{ID:e,prop:o}).subscribe(c=>{this.tclass=c,this.tclass=this.tclass.resource,this.xClass=this.tclass[0].Class,("Literal"==this.xClass||"URL"==this.xClass)&&(this.literal=!0),console.log("+++++++++++"+this.xClass)})}createForm(){this.searchForm=this.fb.group({term:[this.term,l.kI.required],ID:this.ID,prop:this.propriety,text:this.text})}onSaveText(){let o=this.searchForm.value.text;alert("TEXTE - "+o),this.brapciService.api_post("rdf/createLiteral",{q:o,ID:this.searchForm.value.ID,prop:this.searchForm.value.prop}).subscribe(u=>{console.log(u)})}submitAction(){this.brapciService.api_post("rdf/searchSelect",{q:this.searchForm.value.term,ID:this.searchForm.value.ID,prop:this.searchForm.value.prop}).subscribe(u=>{this.concepts=u,this.selectedID="",this.btnChecks()})}save(e){this.brapciService.api_post("rdf/dataAdd",{source:this.searchForm.value.ID,prop:this.searchForm.value.prop,resource:this.selectedID}).subscribe(S=>{this.concepts=S,e?this.wclose():(this.selectedID="",this.btnChecks(),window.opener.location.reload())})}keyUp(){}wclose(){window.self.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(f.S),t.Y36(h.n),t.Y36(d.F0),t.Y36(d.gz),t.Y36(v.eN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-rdf-form"]],decls:3,vars:2,consts:[[1,"aH"],["class","container-fluid mt-3",4,"ngIf"],[1,"container-fluid","mt-3"],[1,"row"],[1,"col-10"],[4,"ngIf"],[1,"col-2","text-end"],[1,"border-bottom","border-secondary","small","center","bold"],[1,"mb-3"],["class","onHover",4,"ngFor","ngForOf"],[1,"border-bottom","border-secondary","small","center","bold","mt-3"],[1,"col-12"],["type","button","id","button-addon2",1,"btn","btn-outline-danger",3,"click"],["type","file",1,"file-input",3,"change"],["fileUpload",""],[1,"file-info"],[1,"btn","btn-outline-primary",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"formGroup"],[1,"input-group","mb-3"],["id","term","type","term","placeholder","Digite aqui","formControlName","term","autofocus","","required","","aria-label","Termo de Busca","aria-describedby","button-addon2",3,"keyup"],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],["type","submit",4,"ngIf"],["size","6",1,"full"],[3,"value","click",4,"ngFor","ngForOf"],[1,"btn","me-2","mt-3",3,"ngClass","disabled","click"],[1,"btn","btn-outline-warning","me-2","mt-3",3,"click"],["type","submit"],[2,"height","65px",3,"src"],[3,"value","click"],[1,"small"],["id","text","type","text","placeholder","Digite aqui","formControlName","text","rows","5",1,"form-control","border","border-secondary","full"],[1,"btn","btn-outline-primary","mt-4",3,"click"],[1,"btn","btn-outline-warning","ms-2","mt-4"],[1,"onHover"],[3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._uU(1),t.qZA(),t.YNc(2,D,29,9,"div",1)),2&e&&(t.xp6(1),t.hij("RDF Editor - ",o.class,""),t.xp6(1),t.Q6J("ngIf",o.xClass))},dependencies:[a.mk,a.sg,a.O5,a.RF,a.n9,a.ED,l._Y,l.YN,l.Kr,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u],encapsulation:2}),i})()}]}];let J=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.Bz.forChild(k),d.Bz]}),i})(),w=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[a.ez,J,l.UX]}),i})()}}]);