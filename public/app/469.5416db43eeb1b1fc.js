"use strict";(self.webpackChunkBRP=self.webpackChunkBRP||[]).push([[469],{469:(v,c,a)=>{a.r(c),a.d(c,{ChatModule:()=>x});var i=a(6814),p=a(5286),e=a(5879),u=a(9862);let g=(()=>{class n{constructor(t){this.http=t,this.apiUrl="https://cip.brapci.inf.br/api/ai/chat",this.apiKey="YOUR_OLLAMA_API_KEY"}sendMessage(t){const o=new u.WM({"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`});return this.http.post(this.apiUrl,{message:t},{headers:o})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(u.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var l=a(95);function m(n,s){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9),e._uU(2),e.qZA()()),2&n){const t=s.$implicit;e.Q6J("ngClass",t.sender),e.xp6(2),e.hij(" ",t.text," ")}}function h(n,s){1&n&&(e.TgZ(0,"div",10)(1,"div",9),e._uU(2,"Ollama est\xe1 digitando..."),e.qZA()())}function f(n,s){if(1&n&&(e.TgZ(0,"div",11),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMessage," ")}}const C=[{path:"",component:(()=>{class n{constructor(t){this.ollamaService=t,this.messages=[],this.userInput="",this.isLoading=!1,this.errorMessage=""}ngOnInit(){this.messages.push({text:"Ol\xe1! Como posso ajudar voc\xea hoje?",sender:"ollama"})}sendMessage(){const t=this.userInput.trim();t&&(this.messages.push({text:t,sender:"user"}),this.userInput="",this.isLoading=!0,this.errorMessage="",this.ollamaService.sendMessage(t).subscribe({next:o=>{this.messages.push({text:o.reply||"Desculpe, n\xe3o entendi.",sender:"ollama"}),this.isLoading=!1},error:o=>{console.error("Erro ao comunicar com Ollama:",o),this.errorMessage="Ocorreu um erro ao enviar a mensagem. Por favor, tente novamente.",this.isLoading=!1}}))}handleKeyPress(t){"Enter"===t.key&&this.sendMessage()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-home-chat"]],decls:9,vars:5,consts:[[1,"chat-container"],[1,"messages"],[3,"ngClass",4,"ngFor","ngForOf"],["class","ollama",4,"ngIf"],["class","error",4,"ngIf"],[1,"input-area"],["type","text","placeholder","Digite sua mensagem...",3,"ngModel","ngModelChange","keypress"],[3,"disabled","click"],[3,"ngClass"],[1,"message"],[1,"ollama"],[1,"error"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,m,3,2,"div",2),e.YNc(3,h,3,0,"div",3),e.qZA(),e.YNc(4,f,2,1,"div",4),e.TgZ(5,"div",5)(6,"input",6),e.NdJ("ngModelChange",function(d){return o.userInput=d})("keypress",function(d){return o.handleKeyPress(d)}),e.qZA(),e.TgZ(7,"button",7),e.NdJ("click",function(){return o.sendMessage()}),e._uU(8,"Enviar"),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("ngForOf",o.messages),e.xp6(1),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",o.errorMessage),e.xp6(2),e.Q6J("ngModel",o.userInput),e.xp6(1),e.Q6J("disabled",o.isLoading))},dependencies:[i.mk,i.sg,i.O5,l.Fj,l.JJ,l.On],styles:[".chat-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;border:1px solid #ddd;border-radius:8px;display:flex;flex-direction:column;height:80vh}.messages[_ngcontent-%COMP%]{flex:1;padding:16px;overflow-y:auto;background-color:#f9f9f9}.user[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{background-color:#0084ff;color:#fff;align-self:flex-end}.ollama[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{background-color:#e5e5ea;color:#000;align-self:flex-start}.message[_ngcontent-%COMP%]{padding:10px 15px;border-radius:20px;margin-bottom:10px;max-width:80%;word-wrap:break-word}.input-area[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #ddd;background-color:#fff}.input-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ddd;border-radius:20px;outline:none}.input-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;padding:10px 20px;border:none;background-color:#0084ff;color:#fff;border-radius:20px;cursor:pointer}.input-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#a0cfff;cursor:not-allowed}.error[_ngcontent-%COMP%]{color:red;text-align:center;padding:5px}"]}),n})()}];let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild(C),p.Bz]}),n})(),x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[i.ez,M,l.u5]}),n})()}}]);