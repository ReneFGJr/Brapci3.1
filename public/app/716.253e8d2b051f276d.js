"use strict";(self.webpackChunkBRP=self.webpackChunkBRP||[]).push([[716],{6716:(S,_,p)=>{p.r(_),p.d(_,{PopupModule:()=>k});var d=p(6814),a=p(594),t=p(9468);let m=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["popup-index"]],decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"router-outlet")},dependencies:[a.lC],encapsulation:2}),o})();var r=p(95),f=p(1090),h=p(4392),v=p(9862);function g(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"\u23f3 Uploading..."),t.qZA())}function x(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"\u2705 Done!"),t.qZA())}function b(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"\u274c Error!"),t.qZA())}function C(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"\u{1f636} Waiting to upload..."),t.qZA())}function Z(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"section",13),t._uU(2," File details: "),t.TgZ(3,"ul")(4,"li"),t._uU(5),t.qZA(),t.TgZ(6,"li"),t._uU(7),t.qZA(),t.TgZ(8,"li"),t._uU(9),t.qZA()()(),t.TgZ(10,"button",14),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.onUpload())}),t._uU(11,"Upload the file"),t.qZA(),t.TgZ(12,"section",15),t.YNc(13,g,2,0,"p",16),t.YNc(14,x,2,0,"p",16),t.YNc(15,b,2,0,"p",16),t.YNc(16,C,2,0,"p",17),t.qZA()()}if(2&o){const e=t.oxw(3);t.xp6(5),t.hij("Name: ",e.file.name,""),t.xp6(2),t.hij("Type: ",e.file.type,""),t.xp6(2),t.hij("Size: ",e.file.size," bytes"),t.xp6(3),t.Q6J("ngSwitch",e.status),t.xp6(1),t.Q6J("ngSwitchCase","uploading"),t.xp6(1),t.Q6J("ngSwitchCase","success"),t.xp6(1),t.Q6J("ngSwitchCase","fail")}}function T(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"h2"),t._uU(2,"Single File Upload"),t.qZA(),t.TgZ(3,"input",11,12),t.NdJ("change",function(s){t.CHM(e);const c=t.oxw(2);return t.KtG(c.onChange(s))}),t.qZA(),t.YNc(5,Z,17,7,"div",5),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(5),t.Q6J("ngIf",e.file)}}function F(o,n){if(1&o&&(t.TgZ(0,"button",28),t._UZ(1,"img",29),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("src",e.loaging_img,t.LSH)}}function I(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"option",30),t.NdJ("click",function(){const c=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.selectResource(c.ID))}),t._uU(1),t.qZA()}if(2&o){const e=n.$implicit;t.Q6J("value",e.ID),t.xp6(1),t.hij(" ",e.name," ")}}function U(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"form",18)(2,"label"),t._uU(3,"Termos de busca"),t.qZA(),t.TgZ(4,"div",19)(5,"input",20),t.NdJ("keyup",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.keyUp())}),t.qZA(),t.TgZ(6,"button",21),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.submitAction())}),t._uU(7," Busca "),t.qZA(),t.YNc(8,F,2,1,"button",22),t._UZ(9,"br"),t.qZA(),t.TgZ(10,"select",23),t.YNc(11,I,2,2,"option",24),t.qZA(),t.TgZ(12,"button",25),t._uU(13," Include "),t.qZA(),t.TgZ(14,"button",26),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.save(!0))}),t._uU(15," Save & Close "),t.qZA(),t.TgZ(16,"button",26),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.save(!1))}),t._uU(17," Save & Continue "),t.qZA(),t.TgZ(18,"button",27),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.wclose())}),t._uU(19," Close "),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.searchForm),t.xp6(7),t.Q6J("ngIf",e.loading),t.xp6(3),t.Q6J("ngForOf",e.concepts),t.xp6(1),t.Q6J("ngClass",0==e.btn1?"btn-primary":"btn-outline-secondary")("disabled",e.btn1),t.xp6(2),t.Q6J("ngClass",0==e.btn2?"btn-primary":"btn-outline-secondary")("disabled",e.btn2),t.xp6(2),t.Q6J("ngClass",0==e.btn3?"btn-primary":"btn-outline-secondary")("disabled",e.btn3)}}function A(o,n){if(1&o&&(t.TgZ(0,"div"),t._UZ(1,"form",18),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.searchForm)}}function R(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",31)(1,"span",14),t.NdJ("click",function(){const c=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.selectResource(c.Class))}),t._uU(2),t.qZA()()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.Class)}}function q(o,n){1&o&&(t.TgZ(0,"div")(1,"i"),t._uU(2,"none"),t.qZA()())}function y(o,n){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.selectedID," ")}}function D(o,n){if(1&o&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4),t._uU(3),t.ALo(4,"json"),t.YNc(5,T,6,1,"div",5),t.YNc(6,U,20,9,"div",5),t.YNc(7,A,2,1,"div",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7),t._uU(10," Persistent ID "),t.qZA(),t.TgZ(11,"div",8),t._uU(12),t.qZA(),t.TgZ(13,"div",7),t._uU(14,"Class"),t.qZA(),t.TgZ(15,"div",8),t._uU(16),t.qZA(),t.TgZ(17,"div",7),t._uU(18," Propriety "),t.qZA(),t.TgZ(19,"div",8),t._uU(20),t.qZA(),t.TgZ(21,"div",7),t._uU(22," Resource "),t.qZA(),t.YNc(23,R,3,1,"div",9),t.TgZ(24,"div",10),t._uU(25," Selected "),t.qZA(),t.YNc(26,q,3,0,"div",5),t.YNc(27,y,2,1,"div",5),t.qZA()()()),2&o){const e=t.oxw();t.xp6(3),t.hij(" ==>",t.lcZ(4,10,e.searchForm.value)," "),t.xp6(2),t.Q6J("ngIf","Image"==e.xClass),t.xp6(1),t.Q6J("ngIf",0==e.literal&&"Image"!=e.xClass),t.xp6(1),t.Q6J("ngIf",0==e.literal),t.xp6(5),t.Oqu(e.ID),t.xp6(4),t.Oqu(e.class),t.xp6(4),t.Oqu(e.propriety),t.xp6(3),t.Q6J("ngForOf",e.tclass),t.xp6(3),t.Q6J("ngIf",!e.selectedID),t.xp6(1),t.Q6J("ngIf",e.selectedID)}}const J=[{path:"",component:m,children:[{path:"rdf/add/:id/:prop",component:(()=>{class o{constructor(e,i,s,c,l,u){this.fb=e,this.brapciService=i,this.localStorageService=s,this.router=c,this.route=l,this.http=u,this.loading=!1,this.loaging_img="/assets/img/loading.svg",this.fields=[],this.literal=!1,this.result=[],this.concepts=[],this.selectedID="",this.tclass=[],this.propriety="hasAuthor",this.class="Article",this.xClass="",this.ID="0",this.btn1=!0,this.btn2=!0,this.btn3=!0,this.status="initial",this.file=null,this.term="",this.select=[{x:"a"},{y:"b"},{z:"z"}]}onChange(e){const i=e.target.files[0];i&&(this.status="initial",this.file=i)}onUpload(){if(this.file){const e=new FormData;let i=this.brapciService.url+"upload/cover/"+this.ID;console.log(i),e.append("file",this.file,this.file.name);const s=this.http.post(i,e);this.status="uploading",s.subscribe({next:c=>{console.log(c),this.status="success"},error:c=>(this.status="fail",c)})}}ngOnInit(){this.sub=this.route.params.subscribe(e=>{this.ID=e.id,this.propriety=e.prop,this.fields=[{name:"Term",value:"",checked:!0},{name:"ID",value:this.ID,checked:!0},{name:"prop",value:this.propriety,checked:!0},this.recoverResources(this.ID,this.propriety)],this.createForm()})}selectResource(e){this.selectedID=e,this.btnChecks()}btnChecks(){this.btn1=!0,this.btn2=!0,this.btn3=!0,""!=this.selectedID&&(this.btn2=!1,this.btn3=!1),""==this.selectedID&&0==this.concepts.length&&(this.btn1=!1)}recoverResources(e,i){console.log("ID="+e),console.log("prop="+i),this.brapciService.api_post("rdf/getResource",{ID:e,prop:i}).subscribe(l=>{this.tclass=l,this.tclass=this.tclass.resource,this.xClass=this.tclass[0].Class,console.log("+++++++++++"+this.xClass)})}createForm(){this.searchForm=this.fb.group({term:[this.term,r.kI.required],ID:this.ID,prop:this.propriety})}submitAction(){this.brapciService.api_post("rdf/searchSelect",{q:this.searchForm.value.term,ID:this.searchForm.value.ID,prop:this.searchForm.value.prop}).subscribe(u=>{this.concepts=u,this.selectedID="",this.btnChecks()})}save(e){this.brapciService.api_post("rdf/dataAdd",{source:this.searchForm.value.ID,prop:this.searchForm.value.prop,resource:this.selectedID}).subscribe(N=>{this.concepts=N,e?this.wclose():(this.selectedID="",this.btnChecks(),window.opener.location.reload())})}keyUp(){}wclose(){window.opener.location.reload(),window.self.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu),t.Y36(f.S),t.Y36(h.n),t.Y36(a.F0),t.Y36(a.gz),t.Y36(v.eN))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rdf-form"]],decls:3,vars:1,consts:[[1,"aH"],["class","container-fluid",4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col-10"],[4,"ngIf"],[1,"col-2","text-end"],[1,"border-bottom","border-secondary","small","center","bold"],[1,"mb-3"],["class","onHover",4,"ngFor","ngForOf"],[1,"border-bottom","border-secondary","small","center","bold","mt-3"],["type","file",1,"file-input",3,"change"],["fileUpload",""],[1,"file-info"],[3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"formGroup"],[1,"input-group","mb-3"],["id","term","type","term","placeholder","Digite aqui","formControlName","term","autofocus","","required","","aria-label","Termo de Busca","aria-describedby","button-addon2",3,"keyup"],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],["type","submit",4,"ngIf"],["size","6",1,"full"],[3,"value","click",4,"ngFor","ngForOf"],[1,"btn","me-2","mt-3",3,"ngClass","disabled"],[1,"btn","me-2","mt-3",3,"ngClass","disabled","click"],[1,"btn","btn-outline-warning","me-2","mt-3",3,"click"],["type","submit"],[2,"height","65px",3,"src"],[3,"value","click"],[1,"onHover"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._uU(1,"RDF Editor"),t.qZA(),t.YNc(2,D,28,12,"div",1)),2&e&&(t.xp6(2),t.Q6J("ngIf",i.xClass))},dependencies:[d.mk,d.sg,d.O5,d.RF,d.n9,d.ED,r._Y,r.YN,r.Kr,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,d.Ts],encapsulation:2}),o})()}]}];let w=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[a.Bz.forChild(J),a.Bz]}),o})(),k=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.ez,w,r.UX]}),o})()}}]);