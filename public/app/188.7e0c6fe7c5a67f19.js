"use strict";(self.webpackChunkBRP=self.webpackChunkBRP||[]).push([[188],{8188:(P,_,p)=>{p.r(_),p.d(_,{PopupModule:()=>H});var a=p(6814),u=p(5286),t=p(5879);let v=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["popup-index"]],decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"router-outlet")},dependencies:[u.lC],encapsulation:2}),o})();var l=p(95),m=p(1090),f=p(4392),h=p(9862);function g(o,s){1&o&&(t.TgZ(0,"p"),t._uU(1,"\u23f3 Carregando..."),t.qZA())}function x(o,s){1&o&&(t.TgZ(0,"p"),t._uU(1,"\u2705 Conclu\xeddo com sucesso!"),t.qZA())}function b(o,s){1&o&&(t.TgZ(0,"p"),t._uU(1,"\u274c Erro ao enviar arquivo!"),t.qZA())}function C(o,s){1&o&&(t.TgZ(0,"p"),t._uU(1,"\u{1f636} Clique para enviar o arquivo"),t.qZA())}function Z(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"section",15),t._uU(2," File details: "),t.TgZ(3,"ul")(4,"li"),t._uU(5),t.qZA(),t.TgZ(6,"li"),t._uU(7),t.qZA(),t.TgZ(8,"li"),t._uU(9),t.qZA(),t.TgZ(10,"li"),t._uU(11),t.qZA()()(),t.TgZ(12,"button",16),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.onUpload())}),t._uU(13," Enviar o arquivo "),t.qZA(),t.TgZ(14,"section",17),t.YNc(15,g,2,0,"p",18),t.YNc(16,x,2,0,"p",18),t.YNc(17,b,2,0,"p",18),t.YNc(18,C,2,0,"p",19),t.qZA()()}if(2&o){const e=t.oxw(3);t.xp6(5),t.hij("Name: ",e.file.name,""),t.xp6(2),t.hij("Type: ",e.file.type,""),t.xp6(2),t.hij("Size: ",e.file.size," bytes"),t.xp6(2),t.hij("ID: ",e.ID,""),t.xp6(3),t.Q6J("ngSwitch",e.status),t.xp6(1),t.Q6J("ngSwitchCase","uploading"),t.xp6(1),t.Q6J("ngSwitchCase","success"),t.xp6(1),t.Q6J("ngSwitchCase","fail")}}function T(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"h2"),t._uU(2,"Single File Upload"),t.qZA(),t.TgZ(3,"input",13,14),t.NdJ("change",function(n){t.CHM(e);const c=t.oxw(2);return t.KtG(c.onChange(n))}),t.qZA(),t.YNc(5,Z,19,8,"div",5),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(5),t.Q6J("ngIf",e.file)}}function F(o,s){if(1&o&&(t.TgZ(0,"button",29),t._UZ(1,"img",30),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("src",e.loaging_img,t.LSH)}}function D(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"option",31),t.NdJ("click",function(){const c=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.selectResource(c.ID))}),t._uU(1),t.qZA()}if(2&o){const e=s.$implicit;t.Q6J("value",e.ID),t.xp6(1),t.hij(" ",e.name," ")}}function y(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"form",20)(2,"label"),t._uU(3,"Termos de busca"),t.qZA(),t.TgZ(4,"div",21)(5,"input",22),t.NdJ("keyup",function(n){t.CHM(e);const c=t.oxw(2);return t.KtG(c.keyUp(n))}),t.qZA(),t.TgZ(6,"button",23),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.submitAction())}),t._uU(7," Busca "),t.qZA(),t.YNc(8,F,2,1,"button",24),t._UZ(9,"br"),t.qZA(),t.TgZ(10,"select",25),t.YNc(11,D,2,2,"option",26),t.qZA(),t.TgZ(12,"button",27),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.createConcept())}),t._uU(13," Include "),t.qZA(),t.TgZ(14,"button",27),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.save(!0))}),t._uU(15," Save & Close "),t.qZA(),t.TgZ(16,"button",27),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.save(!1))}),t._uU(17," Save & Continue "),t.qZA(),t.TgZ(18,"button",28),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.wclose())}),t._uU(19," Close "),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.searchForm),t.xp6(7),t.Q6J("ngIf",e.loading),t.xp6(3),t.Q6J("ngForOf",e.concepts),t.xp6(1),t.Q6J("ngClass",0==e.btn1?"btn-primary":"btn-outline-secondary")("disabled",e.btn1),t.xp6(2),t.Q6J("ngClass",0==e.btn2?"btn-primary":"btn-outline-secondary")("disabled",e.btn2),t.xp6(2),t.Q6J("ngClass",0==e.btn3?"btn-primary":"btn-outline-secondary")("disabled",e.btn3)}}function I(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"form",20)(2,"label",32),t._uU(3,"Texto"),t.qZA(),t._UZ(4,"textarea",33),t.TgZ(5,"button",34),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.onSaveText())}),t._uU(6," Salvar "),t.qZA(),t.TgZ(7,"button",35),t._uU(8,"Fechar"),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.searchForm)}}function U(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",36)(1,"span",37),t.NdJ("click",function(){const c=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.selectResource(c.Class))}),t._uU(2),t.qZA()()}if(2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.Class)}}function q(o,s){1&o&&(t.TgZ(0,"div")(1,"i"),t._uU(2,"none"),t.qZA()())}function w(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.selectedID," ")}}function A(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4),t.YNc(3,T,6,1,"div",5),t.YNc(4,y,20,9,"div",5),t.YNc(5,I,9,1,"div",5),t.qZA(),t.TgZ(6,"div",6)(7,"div",7),t._uU(8," Persistent ID "),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.qZA(),t.TgZ(11,"div",7),t._uU(12,"Class"),t.qZA(),t.TgZ(13,"div",8),t._uU(14),t.qZA(),t.TgZ(15,"div",7),t._uU(16," Propriety "),t.qZA(),t.TgZ(17,"div",8),t._uU(18),t.qZA(),t.TgZ(19,"div",7),t._uU(20," Resource "),t.qZA(),t.YNc(21,U,3,1,"div",9),t.TgZ(22,"div",10),t._uU(23," Selected "),t.qZA(),t.YNc(24,q,3,0,"div",5),t.YNc(25,w,2,1,"div",5),t.qZA(),t.TgZ(26,"div",11)(27,"button",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.closeAction())}),t._uU(28," Fechar Janela "),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngIf","Image"==e.xClass||"FileStorage"==e.xClass),t.xp6(1),t.Q6J("ngIf",0==e.literal&&"Image"!=e.xClass&&"FileStorage"!=e.xClass),t.xp6(1),t.Q6J("ngIf",1==e.literal),t.xp6(5),t.Oqu(e.ID),t.xp6(4),t.Oqu(e.class),t.xp6(4),t.Oqu(e.propriety),t.xp6(3),t.Q6J("ngForOf",e.tclass),t.xp6(3),t.Q6J("ngIf",!e.selectedID),t.xp6(1),t.Q6J("ngIf",e.selectedID)}}function k(o,s){1&o&&(t.TgZ(0,"div",7),t._uU(1," BUSY "),t.qZA())}function J(o,s){if(1&o&&(t.TgZ(0,"div",15),t._uU(1," Recurso:"),t._UZ(2,"br"),t.TgZ(3,"b",16),t._uU(4),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(e.data.result.concept)}}function N(o,s){if(1&o&&(t.TgZ(0,"div",15),t._uU(1," Propriedade:"),t._UZ(2,"br"),t.TgZ(3,"b",16),t._uU(4),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(e.data.result.Property)}}function S(o,s){if(1&o&&(t.TgZ(0,"div",15),t._uU(1," Recurso:"),t._UZ(2,"br"),t.TgZ(3,"b",16),t._uU(4),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(e.data.result.resource)}}function Y(o,s){if(1&o&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.message)}}function Q(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",8),t.YNc(1,J,5,1,"div",9),t.YNc(2,N,5,1,"div",9),t.YNc(3,S,5,1,"div",9),t.TgZ(4,"div",10)(5,"button",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.exclude())}),t._uU(6,"Confirma exclus\xe3o"),t.qZA()(),t.YNc(7,Y,2,1,"div",12),t.TgZ(8,"div",13)(9,"button",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.close())}),t._uU(10,"Fechar/Cancelar"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.data.result),t.xp6(1),t.Q6J("ngIf",e.data.result),t.xp6(1),t.Q6J("ngIf",e.data.result),t.xp6(4),t.Q6J("ngIf",e.message)}}const M=[{path:"",component:v,children:[{path:"rdf/add/:id/:prop",component:(()=>{class o{constructor(e,i,n,c,r,d){this.fb=e,this.brapciService=i,this.localStorageService=n,this.router=c,this.route=r,this.http=d,this.loading=!1,this.loaging_img="/assets/img/loading.svg",this.fields=[],this.literal=!1,this.type="null",this.result=[],this.concepts=[],this.selectedID="",this.tclass=[],this.propriety="hasAuthor",this.class="Article",this.xClass="",this.ID="0",this.text="",this.btn1=!0,this.btn2=!0,this.btn3=!0,this.status="initial",this.file=null,this.term="",this.select=[{x:"a"},{y:"b"},{z:"z"}]}onChange(e){const i=e.target.files[0];i&&(this.status="initial",this.file=i)}closeAction(){window.close()}onUpload(){if(this.file){const e=new FormData;this.type="cover","hasFileStorage"==this.propriety&&(this.type="pdf"),"hasLogotype"==this.propriety&&(this.type="image"),console.log(this.propriety),console.log("+++"+this.type);let i=this.brapciService.url+"upload/"+this.type+"/"+this.ID;console.log(i),e.append("file",this.file,this.file.name),e.append("property",this.propriety);const n=this.http.post(i,e);this.status="uploading",n.subscribe({next:c=>{console.log(c),this.status="success"},error:c=>(this.status="fail",c)})}}createConcept(){let i="rdf/createConcept/"+this.xClass,n={name:this.searchForm.value.term};console.log(i),this.brapciService.api_post(i,n).subscribe(c=>{console.log(c),this.submitAction()})}ngOnInit(){this.sub=this.route.params.subscribe(e=>{this.ID=e.id,this.propriety=e.prop,this.fields=[{name:"Term",value:"",checked:!0},{name:"ID",value:this.ID,checked:!0},{name:"prop",value:this.propriety,checked:!0},this.recoverResources(this.ID,this.propriety)],this.createForm()})}selectResource(e){this.selectedID=e,this.btnChecks()}btnChecks(){this.btn1=!0,this.btn2=!0,this.btn3=!0,""!=this.selectedID&&(this.btn2=!1,this.btn3=!1),""==this.selectedID&&0==this.concepts.length&&(this.btn1=!1)}recoverResources(e,i){this.brapciService.api_post("rdf/getResource",{ID:e,prop:i}).subscribe(r=>{this.tclass=r,this.tclass=this.tclass.resource,this.xClass=this.tclass[0].Class,("Literal"==this.xClass||"URL"==this.xClass)&&(this.literal=!0),console.log("+++++++++++"+this.xClass)})}createForm(){this.searchForm=this.fb.group({term:[this.term,l.kI.required],ID:this.ID,prop:this.propriety,text:this.text})}onSaveText(){let i=this.searchForm.value.text;alert("TEXTE - "+i),this.brapciService.api_post("rdf/createLiteral",{q:i,ID:this.searchForm.value.ID,prop:this.searchForm.value.prop}).subscribe(d=>{console.log(d)})}submitAction(){let r={q:this.searchForm.value.term,ID:this.searchForm.value.ID,prop:this.searchForm.value.prop};this.loading=!0,this.brapciService.api_post("rdf/searchSelect",r).subscribe(d=>{this.concepts=d,this.selectedID="",this.btnChecks(),this.loading=!1})}save(e){this.brapciService.api_post("rdf/dataAdd",{source:this.searchForm.value.ID,prop:this.searchForm.value.prop,resource:this.selectedID}).subscribe(G=>{this.concepts=G,e?this.wclose():(this.selectedID="",this.btnChecks(),window.opener.location.reload())})}keyUp(e){console.log("Tecla pressionada:",e.key),"Enter"===e.key&&this.submitAction()}wclose(){window.opener.location.reload(),window.self.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.qu),t.Y36(m.S),t.Y36(f.n),t.Y36(u.F0),t.Y36(u.gz),t.Y36(h.eN))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rdf-form"]],decls:3,vars:2,consts:[[1,"aH"],["class","container-fluid mt-3",4,"ngIf"],[1,"container-fluid","mt-3"],[1,"row"],[1,"col-10"],[4,"ngIf"],[1,"col-2","text-end"],[1,"border-bottom","border-secondary","small","center","bold"],[1,"mb-3"],["class","onHover",4,"ngFor","ngForOf"],[1,"border-bottom","border-secondary","small","center","bold","mt-3"],[1,"col-12"],["type","button","id","button-addon2",1,"btn","btn-outline-danger",3,"click"],["type","file",1,"file-input",3,"change"],["fileUpload",""],[1,"file-info"],[1,"btn","btn-outline-primary",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"formGroup"],[1,"input-group","mb-3"],["id","term","type","term","placeholder","Digite aqui","formControlName","term","autofocus","","required","","aria-label","Termo de Busca","aria-describedby","button-addon2",2,"width","400px",3,"keyup"],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],["type","submit",4,"ngIf"],["size","6",1,"full"],[3,"value","click",4,"ngFor","ngForOf"],[1,"btn","me-2","mt-3",3,"ngClass","disabled","click"],[1,"btn","btn-outline-warning","me-2","mt-3",3,"click"],["type","submit"],[2,"height","65px",3,"src"],[3,"value","click"],[1,"small"],["id","text","type","text","placeholder","Digite aqui","formControlName","text","rows","5",1,"form-control","border","border-secondary","full"],[1,"btn","btn-outline-primary","mt-4",3,"click"],[1,"btn","btn-outline-warning","ms-2","mt-4"],[1,"onHover"],[3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._uU(1),t.qZA(),t.YNc(2,A,29,9,"div",1)),2&e&&(t.xp6(1),t.hij("RDF Editor - ",i.class,""),t.xp6(1),t.Q6J("ngIf",i.xClass))},dependencies:[a.mk,a.sg,a.O5,a.RF,a.n9,a.ED,l._Y,l.YN,l.Kr,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u],encapsulation:2}),o})()},{path:"rdf/delete/:id/:prop",component:(()=>{class o{constructor(e,i,n,c,r){this.brapciService=e,this.localStorageService=i,this.router=n,this.route=c,this.http=r,this.busy="",this.ID="",this.propriety="",this.message=""}ngOnInit(){this.sub=this.route.params.subscribe(e=>{this.ID=e.id,this.propriety=e.prop,this.brapciService.api_post("brapci/data/"+this.ID).subscribe(n=>{this.data=n,console.log(n)})})}close(){window.opener.location.reload(),window.self.close()}exclude(){this.brapciService.api_post("rdf/delData/"+this.ID).subscribe(i=>{this.temp=i,this.message=this.temp.message,console.log(this.temp.status),"200"==this.temp.status?(window.opener.location.reload(),window.self.close()):this.message=this.temp.message,console.log(this.temp)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.S),t.Y36(f.n),t.Y36(u.F0),t.Y36(u.gz),t.Y36(h.eN))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rdf-delete"]],decls:8,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12",2,"background-color","#f00000"],[2,"color","white"],[1,"container"],["style","position: absolute; top: 0px; right: 0px","class","row",4,"ngIf"],["class","row mt-4",4,"ngIf"],[1,"row",2,"position","absolute","top","0px","right","0px"],[1,"row","mt-4"],["class","col-lg-4 col-4",4,"ngIf"],[1,"mt-4","col-12"],[1,"btn","btn-danger",3,"click"],["class","mt-4 col-12 text-danger",4,"ngIf"],[1,"mt-3"],[1,"btn","btn-outline-secondary",2,"position","absolute","bottom","10px","right","10px",3,"click"],[1,"col-lg-4","col-4"],[1,"big"],[1,"mt-4","col-12","text-danger"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4,"Brapci Editor RDF - Excluir"),t.qZA()()()(),t.TgZ(5,"div",4),t.YNc(6,k,2,0,"div",5),t.YNc(7,Q,11,4,"div",6),t.qZA()),2&e&&(t.xp6(6),t.Q6J("ngIf",i.busy),t.xp6(1),t.Q6J("ngIf",!i.busy&&i.data))},dependencies:[a.O5],encapsulation:2}),o})()}]}];let E=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(M),u.Bz]}),o})(),H=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[a.ez,E,l.UX]}),o})()}}]);